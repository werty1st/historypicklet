{
  "version": 3,
  "sources": ["../app/popup.ts"],
  "sourcesContent": ["import { h, Component, render } from 'https://unpkg.com/preact?module';\nimport register from 'https://unpkg.com/preact-custom-element?module';\nimport htm from 'https://unpkg.com/htm?module';\n\n\n// Initialize htm with Preact\nconst html = htm.bind(h);\n\nclass HistoryElement extends Component {\n\n    static tagName = 'history-element';\n    static observedAttributes = ['scmsid','lead-paragraph', 'title'];\n\n    onClick = e => {       \n        window.opener.postMessage( JSON.stringify( { message: \"reload\", id: this.props.scmsid   } )  ,  \"https://www.zdf.de/\");\n    }\n\n    render({ scmsid, title, leadParagraph }) {\n\n        if (!title) title=\"loading...\";\n        return html`<li onClick=${ this.onClick } >\n        <a href=\"#\"> ${title} </a>\n        </li>`;\n    }\n}\n  \n\nregister(HistoryElement);\n\n\nasync function history(historyItem, externalId){\n    \n    const data = JSON.parse(historyItem);\n\n    const ul = document.getElementById(\"historylist\");\n\n    let li = document.createElement(\"history-element\");\n    li.setAttribute(\"scmsid\", externalId);\n    li.setAttribute(\"lead-paragraph\", data.leadParagraph);\n    li.setAttribute(\"title\", data.title);\n    ul.appendChild(li);\n\n}\n\n\nfunction installListener(){\n\n    if (!window.l1){\n\n        window.addEventListener(\"message\", (event)=>{\n            if ( event.origin == \"https://www.zdf.de\" ) {\n\n                if ( event.data.history ){\n                    history(event.data.history, event.data.externalId);                    \n                }\n\n\n                console.log(event);\n            }\n        });\n\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            //JSON data for message\n            window.opener.postMessage(  JSON.stringify({ message: \"ready\" }),  \"https://www.zdf.de/\");\n        });\n\n        console.log(\"listener installed\");\n        \n    } else {\n        window.l1 = true;\n        console.log(\"listener exists\");\n    }\n\n}\ninstallListener();"],
  "mappings": "AAAA,mEACA,8DACA,4CAIA,KAAM,GAAO,EAAI,KAAK,GAEtB,eAA6B,EAAU,CAAvC,aARA,CAQA,oBAKI,aAAU,GAAK,CACX,OAAO,OAAO,YAAa,KAAK,UAAW,CAAE,QAAS,SAAU,GAAI,KAAK,MAAM,SAAiB,wBAGpG,OAAO,CAAE,SAAQ,QAAO,iBAAiB,CAErC,MAAK,IAAO,GAAM,cACX,gBAAoB,KAAK;AAAA,uBACjB;AAAA,gBAXZ,AAFX,EAEW,QAAU,kBACV,AAHX,EAGW,mBAAqB,CAAC,SAAS,iBAAkB,SAgB5D,EAAS,GAGT,iBAAuB,EAAa,EAAW,CAE3C,KAAM,GAAO,KAAK,MAAM,GAElB,EAAK,SAAS,eAAe,eAEnC,GAAI,GAAK,SAAS,cAAc,mBAChC,EAAG,aAAa,SAAU,GAC1B,EAAG,aAAa,iBAAkB,EAAK,eACvC,EAAG,aAAa,QAAS,EAAK,OAC9B,EAAG,YAAY,GAKnB,YAA0B,CAEtB,AAAK,OAAO,GAsBR,QAAO,GAAK,GACZ,QAAQ,IAAI,oBArBZ,QAAO,iBAAiB,UAAW,AAAC,GAAQ,CACxC,AAAK,EAAM,QAAU,sBAEZ,GAAM,KAAK,SACZ,EAAQ,EAAM,KAAK,QAAS,EAAM,KAAK,YAI3C,QAAQ,IAAI,MAIpB,SAAS,iBAAiB,mBAAoB,UAAW,CAErD,OAAO,OAAO,YAAc,KAAK,UAAU,CAAE,QAAS,UAAa,yBAGvE,QAAQ,IAAI,uBAQpB",
  "names": []
}
